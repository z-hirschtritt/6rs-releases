(function(e){function t(t){for(var a,i,l=t[0],o=t[1],c=t[2],d=0,f=[];d<l.length;d++)i=l[d],r[i]&&f.push(r[i][0]),r[i]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);u&&u(t);while(f.length)f.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,l=1;l<n.length;l++){var o=n[l];0!==r[o]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={1:0},s=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=o;s.push([12,0]),n()})({12:function(e,t,n){e.exports=n("Vtdi")},3:function(e,t){},4:function(e,t){},5:function(e,t){},"5PQW":function(e,t,n){},6:function(e,t){},7:function(e,t){},"86eM":function(e,t,n){"use strict";var a=n("f4Y7"),r=n.n(a);r.a},NZ4Z:function(e,t,n){},UDuH:function(e,t,n){"use strict";var a=n("5PQW"),r=n.n(a);r.a},Vtdi:function(e,t,n){"use strict";n.r(t);n("Ueya");var a=n("zlta"),r=n.n(a),s=(n("v0CA"),n("D66Q"),n("0eeA"),n("Kw5r")),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-toolbar",{attrs:{app:"",color:"primary",dense:""}},[n("v-toolbar-items",[n("v-btn",{attrs:{flat:"",large:"",color:"white",to:"/"}},[e._v("Releases")]),n("v-btn",{attrs:{flat:"",large:"",color:"white",to:"/new-release"}},[e._v("Create New Release")]),n("v-spacer")],1)],1),n("v-content",[n("v-container",{attrs:{fluid:""}},[n("router-view")],1)],1)],1)},l=[],o=(n("ZL7j"),n("KHd+")),c={},u=Object(o["a"])(c,i,l,!1,null,null,null),d=u.exports,f=(n("ls82"),n("MECJ")),p=n("WTW0"),v=n("L2JU"),m=n("Qe+m"),h=n.n(m),b=n("tGL4"),g=n.n(b),w=n("M5Bh"),x=n.n(w),R=n("MNzl"),_=n.n(R),j=x()("http://localhost:3030"),O=g()().configure(j.request(_.a)),k=O,y=h()(k,{idField:"id"}),S=y.service,C=y.FeathersVuex;s["default"].use(v["a"]),s["default"].use(C);var M=new v["a"].Store({strict:!1,state:{selectedRelease:{},newRelease:{versions:[],GRMChanges:"",jiraDetails:[]}},getters:{getField:p["a"],getNewRelease:function(e){return e.newRelease.versions}},mutations:{updateField:p["c"],setSelectedReleaseView:function(e,t){e.selectedRelease=t},updateNewReleaseVersions:function(e,t){e.newRelease.versions=t}},actions:{setSelectedReleaseView:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t,n){var a,r,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=t.commit,r=t.dispatch,s=t.getters,a("setSelectedReleaseView",n),i=s["releases/find"]({query:{id:n.id-1,$limit:1}}).data[0],r("createAndSetDiff",n,i),console.log({currentRelease:n,previousRelease:i},"Getting new diff");case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),createAndSetDiff:function(e){var t=e.commit,n=e.dispatch,a=e.state,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t("release-diffs/clearAll"),n("release-diffs/create",{currentRelease:r||a.newRelease,previousRelease:s})},updateNewReleaseVersions:function(e,t){var n=e.commit,a=e.dispatch;n("updateNewReleaseVersions",t),a("createAndSetDiff")}},plugins:[S("releases"),S("repos"),S("release-diffs"),S("jira")]}),D=n("jE9Z"),T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"","mt-3":""}},[n("VersionSelectors")],1),n("v-flex",{attrs:{xs12:"","mt-3":""}},[n("MarkdownEditor")],1),n("v-flex",{attrs:{xs12:"","mt-3":""}},[n("JiraTickets")],1),n("v-flex",{attrs:{xs12:"","mt-4":""}},[n("SubmitForm")],1)],1)},$=[],P=n("yT7P"),L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-subheader",{staticClass:"headline",attrs:{"my-2":""}},[e._v("GRM Changes")]),n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{sm6:"",xs12:"","pa-2":""}},[n("v-text-field",{attrs:{label:"markdown here...",box:"",rows:"5","multi-line":"","full-width":""},nativeOn:{input:function(t){e.convertMarkdown()}},model:{value:e.GRMChanges,callback:function(t){e.GRMChanges=t},expression:"GRMChanges"}})],1),n("v-flex",{attrs:{"pa-3":"","pl-5":"",sm6:"",xs12:""}},[n("span",{staticClass:"text-sm-left",domProps:{innerHTML:e._s(e.htmlPreview)}})])],1)],1)},V=[],G=n("DlQD"),N=n.n(G);N.a.setOptions({gfm:!0,breaks:!0,smartLists:!0,smartypants:!0});var E={name:"markdown-editor",data:function(){return{htmlPreview:""}},computed:Object(P["a"])({},Object(p["b"])({GRMChanges:"newRelease.GRMChanges"})),methods:{convertMarkdown:function(){this.htmlPreview=N()(this.GRMChanges)}}},F=E,A=(n("v2Ax"),Object(o["a"])(F,L,V,!1,null,"0dddc4ed",null)),I=A.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-xs-center"},[n("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.submitForm()}}},[e._v("\n      Create New Release\n    ")]),n("v-snackbar",{attrs:{bottom:"","multi-line":""},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n      "+e._s(e.snackBarText)+"\n    "),n("v-btn",{attrs:{flat:"",color:"pink"},nativeOn:{click:function(t){e.snackbar=!1}}},[e._v("Close")])],1)],1)},H=[],Z={data:function(){return{snackbar:!1,snackBarText:""}},methods:Object(P["a"])({},Object(v["d"])(["newRelease"]),{submitForm:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(){var t,n,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.$FeathersVuex.Release,n=new t({data:{versions:this.newRelease().versions,GRMChanges:this.newRelease().GRMChanges}}),n.create().then(function(e){a.snackBarText="New release created: ".concat(e.tag),a.snackbar=!0}).catch(function(e){a.snackBarText="Error creating release: ".concat(e.errors[0].message),a.snackbar=!0});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()})},B=Z,Q=Object(o["a"])(B,J,H,!1,null,null,null),q=Q.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:"",wrap:"","fill-height":""}},e._l(e.repos,function(t,a){return n("v-flex",{key:t.id,staticStyle:{"max-width":"10rem"},attrs:{"mx-1":""}},[n("v-select",{attrs:{label:t.repoName,items:t.releases,"item-text":"tag_name","item-value":"tag_name",value:e.selected[a],"return-object":"",autocomplete:"",loading:e.areReposLoading},on:{change:function(t){e.handleSelection(a,t)}}})],1)}))},U=[],W=n("sX7g"),Y={name:"version-selectors",computed:Object(P["a"])({},Object(v["d"])("repos",{areReposLoading:"isFindPending"}),Object(v["c"])("repos",{findReposInStore:"find"}),{selected:function(){return this.$store.state.newRelease.versions},repos:function(){return this.findReposInStore().data}}),methods:{handleSelection:function(e,t){this.selected[e]=t,this.$store.dispatch("updateNewReleaseVersions",this.selected)}}},K=Y,X=Object(o["a"])(K,z,U,!1,null,null,null),ee=X.exports,te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-layout",{attrs:{"align-start":""}},[n("v-flex",{attrs:{xs12:""}},[n("v-subheader",{staticClass:"headline"},[e._v("Jira Details")])],1),n("v-spacer"),n("v-flex",{attrs:{"ma-1":""}},[e.isDiffLoading?e._e():n("v-btn",{attrs:{color:"accent",icon:"",outline:""},nativeOn:{click:function(t){return e.getDiff(t)}}},[n("v-icon",[e._v("cached")])],1)],1)],1),n("v-layout",{attrs:{row:"",wrap:"",fluid:""}},[e.isDiffLoading?n("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"primary"}}):e._e(),e._l(e.diffs,function(t){return n("v-flex",{key:t.id,attrs:{"ma-1":"",sm12:"",md4:"","text-xs-left":""}},[n("v-card",{attrs:{hover:"",target:"_blank",href:e.getLink(t.ticket)}},[n("v-card-title",{attrs:{"primary-title":""}},[n("h3",{staticClass:"mb-1"},[e._v(e._s(t.ticket))])]),n("v-card-text",[n("strong",[e._v("Description:")]),e._v("\n          "+e._s(t.description)+"\n        ")]),t.releaseNotes?n("v-card-text",[n("strong",[e._v("Release Notes:")]),e._v("\n          "+e._s(t.releaseNotes)+"\n        ")]):e._e()],1)],1)})],2)],1)},ne=[],ae=(n("LvDl"),{name:"jira-details",computed:Object(P["a"])({},Object(v["d"])("release-diffs",{isDiffLoading:"isCreatePending"}),Object(v["c"])("release-diffs",{findDiffsInStore:"find"}),{diffs:function(){return this.findDiffsInStore().data}}),methods:{getLink:function(e){return"https://6river.atlassian.net/browse/".concat(e)},getDiff:function(){this.$store.dispatch("createAndSetDiff")}}}),re=ae,se=(n("86eM"),Object(o["a"])(re,te,ne,!1,null,null,null)),ie=se.exports,le={name:"new-release",components:{MarkdownEditor:I,SubmitForm:q,VersionSelectors:ee,JiraTickets:ie},computed:Object(P["a"])({},Object(v["c"])("repos",{findReposInStore:"find"})),beforeCreate:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("repos/find");case 2:t=this.findReposInStore().data,n=t.map(function(e){return e.releases[0]}),this.$store.dispatch("updateNewReleaseVersions",n);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},oe=le,ce=Object(o["a"])(oe,T,$,!1,null,null,null),ue=ce.exports,de=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"release"},[n("v-container",{attrs:{fluid:""}},[n("ReleaseTable")],1),n("v-container",{attrs:{fluid:""}},[n("SingleReleaseView")],1),n("v-container",{attrs:{fluid:""}},[n("JiraTickets")],1)],1)},fe=[],pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.tableData,"hide-actions":"","item-key":"tag",loading:e.areReleasesLoading,"no-data-text":""},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",[n("v-checkbox",{attrs:{"hide-details":"",color:"secondary"},model:{value:t.selected,callback:function(n){e.$set(t,"selected",n)},expression:"props.selected"}})],1),e._l(e.headers.slice(1),function(a,r){return n("td",{key:r,staticStyle:{padding:"0px","max-width":"10px"},on:{click:function(n){e.selectRelease(t.item)}}},[e._v("\n      "+e._s(t.item[a.value])+"\n    ")])})]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[n("v-progress-circular",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)},ve=[],me=(n("YP5R"),n("Evmg"),n("psz9"),n("YOMv"),n("iv4g")),he={name:"releases",data:function(){return{selected:[],headers:[],tableData:[]}},computed:Object(P["a"])({},Object(v["d"])("releases",{areReleasesLoading:"isFindPending"}),Object(v["d"])({selectedReleases:"selectedReleases"}),Object(v["c"])("releases",{findReleasesInStore:"find"})),methods:Object(P["a"])({},Object(v["b"])("releases",{findReleases:"find"}),{selectRelease:function(e){this.$store.dispatch("setSelectedReleaseView",e)},setTableData:function(){var e=W["a"](this.findReleasesInStore().data),t=Object(me["a"])(new Set(e.reduce(function(e,t){return Object(me["a"])(e).concat(Object(me["a"])(t.versions.map(function(e){return e.repo.repo})))},[]))),n=t.map(function(e){return{text:e,value:e,align:"center",sortable:!1}});this.headers=[{text:"Compare",value:"selected",sortable:!1},{text:"Release Date",value:"createdAt",align:"center"},{text:"Id",value:"id",align:"center"},{text:"Tag",value:"tag",align:"center"}].concat(Object(me["a"])(n)),this.tableData=e.map(function(e){var t=e.versions.reduce(function(e,t){return e[t.repo.repo]=t.tag||t.tag_name,e},{});return Object.assign(e,t)})}}),created:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.findReleases();case 2:this.setTableData(),this.selectRelease(this.findReleasesInStore().data.slice(-1)[0]);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},be=he,ge=Object(o["a"])(be,pe,ve,!1,null,null,null),we=ge.exports,xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-container",{attrs:{"grid-list-md":"","text-xs-center":"","pa-3":""}},[n("div",{staticClass:"headline primary--text"},[n("strong",[e._v("Release: "+e._s(e.selectedRelease.tag))])]),n("v-layout",{attrs:{row:"",wrap:""}},[e._l(e.selectedRelease.versions,function(t){return n("v-flex",{key:t.id,staticClass:"versions",attrs:{"my-2":""}},[n("strong",[e._v(e._s(t.repo.repo))]),e._v(": "+e._s(t.tag_name)+"\n        ")])}),n("v-flex",{attrs:{"mx-2":"",xs12:"",left:"","text-xs-left":""}},[n("div",[n("strong",[e._v("GRM Changes:")])]),n("span",{domProps:{innerHTML:e._s(e.grmHtml())}})])],2)],1)],1)},Re=[],_e={name:"singleRelease",computed:Object(P["a"])({},Object(v["d"])(["selectedRelease"])),methods:{grmHtml:function(){return N()(this.selectedRelease.GRMChanges)}}},je=_e,Oe=(n("UDuH"),Object(o["a"])(je,xe,Re,!1,null,null,null)),ke=Oe.exports,ye={name:"releases",components:{ReleaseTable:we,SingleReleaseView:ke,JiraTickets:ie}},Se=ye,Ce=Object(o["a"])(Se,de,fe,!1,null,null,null),Me=Ce.exports;s["default"].use(D["a"]);var De=new D["a"]({routes:[{path:"/new-release",name:"new-release",component:ue},{path:"/",name:"releases",component:Me}]});s["default"].use(r.a,{theme:{primary:"#2458A0",secondary:"#FFA726",accent:"#8A8D8F",error:"#f44336",warning:"#faece4",info:"#2196f3",success:"#4caf50"}}),s["default"].config.productionTip=!1,new s["default"]({router:De,store:M,render:function(e){return e(d)}}).$mount("#app")},ZL7j:function(e,t,n){"use strict";var a=n("NZ4Z"),r=n.n(a);r.a},f4Y7:function(e,t,n){},"qG/f":function(e,t,n){},v2Ax:function(e,t,n){"use strict";var a=n("qG/f"),r=n.n(a);r.a}});
//# sourceMappingURL=app.04c07ae7.js.map